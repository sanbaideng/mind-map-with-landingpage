<!DOCTYPE html><html lang=""><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1,minimum-scale=1"><link rel="icon" href="/mind-map/logo.ico"><title>思绪思维导图</title><style>
/* Hide download tip dialog */
.el-message-box:has([data-task-checked]) {
  display: none !important;
}
.el-message-box-wrapper {
  display: none !important;
}
/* Move language selector to be near import/export */
.navigatorContainer {
  display: flex !important;
  flex-direction: row !important;
  align-items: center !important;
}
.navigatorContainer .item:first-child {
  order: 3 !important;
  margin-left: auto !important;
  margin-right: 10px !important;
}
/* Style language selector */
.navigatorContainer .item:first-child .el-select {
  width: 140px !important;
}
/* Add flag icons before language options */
.el-select-dropdown__item[label*="English"]::before {
  content: "🇺🇸 ";
}
.el-select-dropdown__item[label="中文"]::before {
  content: "🇨🇳 ";
}
.el-select-dropdown__item[label="繁體中文"]::before {
  content: "🇹🇼 ";
}
.el-select-dropdown__item[label="Tiếng Việt"]::before {
  content: "🇻🇳 ";
}
</style><script>// 自定义静态资源的路径
      window.externalPublicPath = '/mind-map/'
      // 接管应用
      window.takeOverApp = false</script><script charset="UTF-8" id="LA_COLLECT" src="//sdk.51.la/js-sdk-pro.min.js"></script><script>try {
        LA.init({
          id: 'KRO0WxK8GT66tYCQ',
          ck: 'KRO0WxK8GT66tYCQ',
          autoTrack: false
        })
      } catch (error) {
        console.log(error)
      }</script><link href="/mind-map/css/chunk-vendors.css?227f61428db154a5d9bc" rel="stylesheet"><link href="/mind-map/css/app.css?227f61428db154a5d9bc" rel="stylesheet"></head><body><noscript><strong>We're sorry but thoughts doesn't work properly without JavaScript enabled. Please enable it to continue.</strong></noscript><div id="app"></div><script>const getDataFromBackend = () => {
        return new Promise((resolve, reject) => {
          setTimeout(() => {
            resolve({
              mindMapData: {
                root: {
                  data: {
                    text: '根节点'
                  },
                  children: []
                },
                theme: {
                  template: 'avocado',
                  config: {}
                },
                layout: 'logicalStructure',
                config: {},
                view: null
              },
              mindMapConfig: {},
              lang: 'zh',
              localConfig: null
            })
          }, 200)
        })
      }
      const setTakeOverAppMethods = data => {
        window.takeOverAppMethods = {}
        // 获取思维导图数据的函数
        window.takeOverAppMethods.getMindMapData = () => {
          return data.mindMapData
        }
        // 保存思维导图数据的函数
        window.takeOverAppMethods.saveMindMapData = data => {
          console.log(data)
        }
        // 获取思维导图配置，也就是实例化时会传入的选项
        window.takeOverAppMethods.getMindMapConfig = () => {
          return data.mindMapConfig
        }
        // 保存思维导图配置
        window.takeOverAppMethods.saveMindMapConfig = config => {
          console.log(config)
        }
        // 获取语言的函数
        window.takeOverAppMethods.getLanguage = () => {
          return data.lang
        }
        // 保存语言的函数
        window.takeOverAppMethods.saveLanguage = lang => {
          console.log(lang)
        }
        // 获取本地配置的函数
        window.takeOverAppMethods.getLocalConfig = () => {
          return data.localConfig
        }
        // 保存本地配置的函数
        window.takeOverAppMethods.saveLocalConfig = config => {
          console.log(config)
        }
      }
      window.onload = async () => {
        if (!window.takeOverApp) return
        // 请求数据
        const data = await getDataFromBackend()
        // 设置全局的方法
        setTakeOverAppMethods(data)
        // 思维导图实例创建完成事件
        window.$bus.$on('app_inited', mindMap => {
          console.log(mindMap)
        })
        // 可以通过window.$bus.$on()来监听应用的一些事件
        // 实例化页面
        window.initApp()
      }
      
      // 设置默认语言为英语
      window.addEventListener('DOMContentLoaded', () => {
        const savedLang = localStorage.getItem('SIMPLE_MIND_MAP_LANG')
        if (!savedLang) {
          localStorage.setItem('SIMPLE_MIND_MAP_LANG', 'en')
        }
      })
      
      // 监听来自父窗口的语言切换消息
      window.addEventListener('message', (event) => {
        if (event.data.type === 'setLanguage' && event.data.lang) {
          try {
            if (window.$i18n) {
              window.$i18n.locale = event.data.lang
              localStorage.setItem('SIMPLE_MIND_MAP_LANG', event.data.lang)
              if (window.$bus) {
                window.$bus.$emit('lang_change')
              }
            }
          } catch (error) {
            console.error('Failed to update language:', error)
          }
        }
      })</script><script src="/mind-map/js/chunk-vendors.js?227f61428db154a5d9bc"></script><script src="/mind-map/js/app.js?227f61428db154a5d9bc"></script></body></html>